{% extends 'basic.html' %}
{% block title %}Myride{% endblock title %}
{% block body %}

        <div class="container text-center">
            <div class="row gx-5">
              <!-- {%for i in app_driver %}
              <div class="col">
               <div class="p-3 border bg-light"> Total Drivers :{{i.id}} </div>
              </div>
           
              {% endfor %}  -->
            </div>
          </div>
          <h1 class="center"> Drivers</h1>
          <div class="map" id="map">
            
          </div>
          <table class="table drivers table-hover">
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Date Of Birth</th>
                <th scope="col">Gender</th>
                <th scope="col">Phone Number</th>
                <th scope="col">Vehicle No</th>
                <th scope="col">Vehicle Name</th>
                <th scope="col">License No</th>
                <th scope="col">Insurance No</th>
                <th scope="col">Earnings</th>
                <th scope="col"><i>Actions</i></th>
              </tr>
            </thead>
            <tbody>
              {%for i in app_driver %}
              <tr>
                
                <td class="">
                  {{i.name}}
                </td>
                <td class="">
                  {{i.date_of_birth}} 
                </td>
                <td class="">
                  {{i.gender}} 
                </td>
                <td class=""> 
                  {{i.phone_number}} 
                </td>
                <td class=""> 
                  {{i.vehicle_no}} 
                </td>
                <td class=""> 
                  {{i.vehicle_name}} 
                </td>
                <td class=""> 
                  {{i.license_no}} 
                </td>
                <td class=""> 
                  {{i.insurance_no}} 
                </td>
                <td class=""> 
                  {{i.earnings}} 
                </td>
            
                <td class=""> 
                  <a href="/driver-details/{{i.id}}">View-Details</a>
                </td>
              

                </tr>
                  {% endfor %} 
            </tbody>
          </table>
        </main>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <script>
            
            
          function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
              center: new google.maps.LatLng(20.5937,78.9629),
              zoom: 4,
            });
          
            var iconBase ='/static/';
            const icons = {
              car: {
                icon: iconBase + 'car.png',
              },

            };
            const features = [
            {% for i in driver %}
              {
                position: new google.maps.LatLng({{i.current_location_lat}}, {{i.current_location_long}}),
                type: "car",
              },
            {% endfor %}
            ];
          
            // Create markers.
            for (let i = 0; i < features.length; i++) {
              const marker = new google.maps.Marker({
                position: features[i].position,
                icon: icons[features[i].type].icon,
                map: map,
              });
            }
          }

          
          window.initMap = initMap;
          
        </script>
       
        <script async defer
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAdeI1GITrMTHzndOwzKecdo9zbNFVNg4&callback=initMap"></script>
      

          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>



    </div>

  </div>
  {% endblock body %}











  
  


